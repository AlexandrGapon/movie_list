(this.webpackJsonpmovies_table=this.webpackJsonpmovies_table||[]).push([[0],{24:function(e,t,n){e.exports={pagination:"Pagination_pagination__cMpN8",pagination__item:"Pagination_pagination__item__2Sico",pagination__item_current:"Pagination_pagination__item_current__10ZZO"}},27:function(e,t,n){e.exports={loader__container:"Loader_loader__container__3ELGZ",loader:"Loader_loader__1BNN0",rotate:"Loader_rotate__1oJGg"}},29:function(e,t,n){e.exports={button:"PrimaryButton_button__1gsF1"}},38:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(19),r=n.n(a),i=(n(38),n(7)),o=(n(42),"LOAD_MOVIES"),s="LOAD_MOVIES_SUCCESS",l="LOAD_MOVIES_FAILURE";n(43);var u=n(24),d=n.n(u),m=n(2),j=function(e){var t=e.itemsCount,n=e.currentPage,c=e.perPage,a=Object(i.b)(),r=[],s=1;return t>c&&(s=Math.ceil(t/c)),s>1&&function(e,t,n){if(t>10)if(n>5&&n<t-4)for(var c=n-4;c<=n+5&&(e.push(c),c!==t);c++);else if(n>=t-4)for(var a=t-9;a<=t;a++)e.push(a);else for(var r=1;r<=10&&(e.push(r),r!==t);r++);else for(var i=1;i<=t;i++)e.push(i)}(r,s,n),Object(m.jsx)("div",{className:d.a.pagination,children:r.map((function(e){return Object(m.jsx)("span",{className:e===n?d.a.pagination__item_current:d.a.pagination__item,onClick:function(){return a({type:o,payload:{page:e,limit:c}})},children:e},e)}))})},b=n(27),O=n.n(b),h=function(){return Object(m.jsx)("div",{className:O.a.loader__container,children:Object(m.jsx)("div",{className:O.a.loader})})},p=n(6),g=(n(45),n(29)),v=n.n(g),x=function(e){var t=e.children,n=e.handleClick;return Object(m.jsx)("button",{className:v.a.button,onClick:n,children:t})},_=function(e){var t=e.title,n=e.year,c=e.language,a=e.genres,r=e.runtime,i=e.rating,o=e.movieId,s=Object(p.g)();return Object(m.jsxs)("tr",{className:"movie",children:[Object(m.jsx)("td",{className:"titleColumn",children:t}),Object(m.jsx)("td",{className:"yearColumn",children:n}),Object(m.jsx)("td",{className:"languageColumn",children:c}),Object(m.jsx)("td",{className:"genresColumn",children:a?a.map((function(e,t){return Object(m.jsxs)("span",{children:[e,Object(m.jsx)("br",{})]},t)})):"-"}),Object(m.jsx)("td",{className:"runtimeColumn",children:0===r?"-":r}),Object(m.jsx)("td",{className:"ratingColumn",children:0===i?"-":i}),Object(m.jsx)("td",{className:"buttonColumn",children:Object(m.jsx)(x,{handleClick:function(){s.push("/comments/".concat(o))},children:"Comments"})})]})},f=function(){var e=Object(i.c)((function(e){return e.movies})).movies;return Object(m.jsxs)("table",{className:"movieList",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Title"}),Object(m.jsx)("td",{children:"Year"}),Object(m.jsx)("td",{children:"Language"}),Object(m.jsx)("td",{children:"Genres"}),Object(m.jsx)("td",{children:"Runtime"}),Object(m.jsx)("td",{children:"Rating"}),Object(m.jsx)("td",{})]})}),Object(m.jsx)("tbody",{children:e.map((function(e){return Object(m.jsx)(_,{movieId:e.id,title:e.title,year:e.year,language:e.language,genres:e.genres,runtime:e.runtime,rating:e.rating},e.id)}))})]})},y=function(){var e=Object(i.c)((function(e){return e.movies})),t=e.page,n=e.limit,c=e.moviesCount,a=e.isLoading;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{className:"title",children:"Movie List"}),a?Object(m.jsx)(h,{}):Object(m.jsx)(f,{}),!a&&Object(m.jsx)(j,{itemsCount:c,currentPage:t,perPage:n})]})},N=n(23),C=n(31),w="ADD_COMMENT",L="DELETE_COMMENT",P=function(e){return e.map((function(e){var t={};return e.hasOwnProperty("id")&&(t.id=e.id),e.hasOwnProperty("title_english")?t.title=e.title_english:t.title=e.title,e.hasOwnProperty("runtime")&&(t.runtime=e.runtime),e.hasOwnProperty("year")&&(t.year=e.year),e.hasOwnProperty("rating")&&(t.rating=e.rating),e.hasOwnProperty("language")&&(t.language=e.language),e.hasOwnProperty("genres")&&(t.genres=e.genres),e.hasOwnProperty("large_cover_image")&&(t.coverUrl=e.large_cover_image.replace("large-cover.jpg","")),t}))},k=(n(48),n(49),n(50),function(e){var t=e.id,n=e.body,c=Object(i.b)(),a=function(e){var t=new Date(e);return"".concat(t.getDate(),".").concat(t.getMonth()+1,".").concat(t.getFullYear()," ").concat(t.getHours(),":").concat(t.getMinutes())}(t);return Object(m.jsxs)("div",{className:"comment",children:[Object(m.jsxs)("div",{className:"comment__body",children:[Object(m.jsx)("div",{className:"comment__date",children:a}),Object(m.jsx)("div",{className:"comment__text",children:n})]}),Object(m.jsx)(x,{handleClick:function(){c({type:L,payload:t})},children:"Delete"})]})}),M=function(e){var t=e.movieComments;return 0===t.length?Object(m.jsx)("div",{className:"noncomments",children:Object(m.jsx)("h2",{children:"No comments yet"})}):Object(m.jsx)(m.Fragment,{children:t.map((function(e){return Object(m.jsx)(k,{id:e.id,body:e.body},e.id)}))})},E=function(){var e,t=Object(p.g)(),n=Object(i.b)(),a=Object(i.c)((function(e){return e.comments})).comments,r=Object(i.c)((function(e){return e.movies})).movies,o=Object(c.useState)(""),s=Object(C.a)(o,2),l=s[0],u=s[1],d=t.location.pathname.replace("/comments/",""),j=function(e,t){for(var n=null,c=null,a=null,r=0;r<e.length;r++)e[r].id===+t&&(n=e[r].coverUrl,c=e[r].title,a=e[r].year);return{url:n,title:c,year:a}}(r,d),b=j.url,O=j.title,h=j.year,g=(e=d,a.filter((function(t){return t.movieId===e})));return Object(m.jsxs)("div",{className:"commentsPage",children:[Object(m.jsxs)("div",{className:"comments__header",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"comments__title",children:"".concat(O," (").concat(h,")")}),b&&Object(m.jsx)("img",{src:"".concat(b,"medium-cover.jpg"),alt:"Movie cover"})]}),Object(m.jsxs)("div",{className:"comment__form",children:[Object(m.jsx)("textarea",{value:l,onChange:function(e){return u(e.target.value)},placeholder:"Write your comment"}),l&&Object(m.jsx)(x,{handleClick:function(){n({type:w,payload:{movieId:d,id:Date.now(),body:l}}),u("")},children:"Add comment"})]}),Object(m.jsx)(N.b,{className:"backLink",to:"/",children:"To Movie List"})]}),Object(m.jsx)(M,{movieComments:g})]})};var I=function(){var e=Object(i.b)();return Object(c.useEffect)((function(){e({type:o,payload:{page:1,limit:10}})}),[e]),Object(m.jsx)("div",{className:"app",children:Object(m.jsx)(N.a,{children:Object(m.jsxs)(p.d,{children:[Object(m.jsx)(p.b,{exact:!0,path:"/",component:y}),Object(m.jsx)(p.b,{exact:!0,path:"/comments/:id",component:E}),Object(m.jsx)(p.a,{to:"/"})]})})})},D=n(15),S=n(33),A=n(32),T=n(12),F={comments:[]},U={page:1,limit:10,moviesCount:null,isLoading:!1,error:null,movies:[]},B=Object(D.b)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:var n=t.payload,c=n.page,a=n.limit;return Object(T.a)(Object(T.a)({},e),{},{isLoading:!0,page:c,limit:a});case s:var r=t.payload,i=r.movies,u=r.movie_count;return Object(T.a)(Object(T.a)({},e),{},{isLoading:!1,moviesCount:u,movies:P(i)});case l:return Object(T.a)(Object(T.a)({},e),{},{isLoading:!1,error:t.payload});default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:var n=t.payload,c=n.movieId,a=n.id,r=n.body;return Object(T.a)(Object(T.a)({},e),{},{comments:[].concat(Object(A.a)(e.comments),[{movieId:c,id:a,body:r}])});case L:return{state:e,comments:e.comments.filter((function(e){return e.id!==t.payload}))};default:return e}}}),G=n(13),J=n.n(G),R=n(14),V=J.a.mark(Y),Z=J.a.mark(H);function Y(e){var t,n,c,a,r;return J.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.page,c=t.limit,i.prev=2,i.next=5,Object(R.c)(fetch,"https://yts.mx/api/v2/list_movies.json?page=".concat(n,"&limit=").concat(c));case 5:return a=i.sent,i.next=8,Object(R.b)(a,a.json);case 8:return r=i.sent,i.next=11,Object(R.d)({type:s,payload:r.data});case 11:i.next=17;break;case 13:return i.prev=13,i.t0=i.catch(2),i.next=17,Object(R.d)({type:l,payload:i.t0});case 17:case"end":return i.stop()}}),V,null,[[2,13]])}function H(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.e)(o,Y);case 2:case"end":return e.stop()}}),Z)}var W=J.a.mark(q);function q(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.a)([H()]);case 2:case"end":return e.stop()}}),W)}var z=Object(S.a)(),K=Object(D.d)(B,Object(D.a)(z));z.run(q),r.a.render(Object(m.jsx)(i.a,{store:K,children:Object(m.jsx)(I,{})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.2f3a55fa.chunk.js.map